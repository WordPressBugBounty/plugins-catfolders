(()=>{"use strict";var e,a={101:()=>{const e=window.wp.blocks,a=JSON.parse('{"UU":"catfolders/image-gallery"}'),l=window.React,t=window.wp.blockEditor,n=window.wp.components,o=window.wp.element;function r(){return(0,l.createElement)("div",{className:"block-spinner-wrap"},(0,l.createElement)("span",{className:"spinner is-active"}))}function c(e){return(0,l.createElement)(n.Notice,{status:"error",isDismissible:!1},(0,l.createElement)("p",null,e.mess))}const i=({layout:e,columns:a,attachments:t,displayCaption:o})=>{const r="masonry"===e?`is-style-masonry catf-columns-${a}`:"";return(0,l.createElement)("div",{id:"catfolders-gallery-app"},t.length?(0,l.createElement)(n.__experimentalGrid,{columns:a,columnGap:10,className:r},t.map((e,a)=>(0,l.createElement)("figure",{className:"wp-block-image",key:a},(0,l.createElement)("img",{src:e.src,alt:e.src}),o&&""!==e.caption?(0,l.createElement)("figcaption",{className:"wp-block-image-caption"},e.caption):null))):(0,l.createElement)(c,{mess:window.catfData.i18n.global.error_notice_folder_empty}))},s=(e=[],a=" ")=>e.length?e.flatMap(e=>[{label:a+e.title,value:e.id},...s(e.children||[],a+"-")]):[];function m({folders:e,onChange:a,defaultValue:t}){const o=[{label:"Please choose folder",value:"0",disabled:!0},...s(e)];return(0,l.createElement)(l.Fragment,null,o.length>1?(0,l.createElement)(n.SelectControl,{label:window.catfData.i18n.global.folders,multiple:!0,options:o,onChange:a,defaultValue:t}):(0,l.createElement)(l.Fragment,null,(0,l.createElement)("p",null,window.catfData.i18n.global.dont_have_folder),(0,l.createElement)(n.Button,{href:`${window.catfData.adminUrl}upload.php`,target:"_blank",variant:"primary",className:"create-first-folder-button"},window.catfData.i18n.global.create_first_folder)))}const d=(e="GET",a="",l={})=>jQuery.ajax({url:window.catfData.apiSettings.rest_url+a,beforeSend:()=>{},method:e,dataType:"json",contentType:"application/json",headers:{"X-WP-Nonce":window.catfData.apiSettings.rest_nonce},data:"GET"===e?l:JSON.stringify(l)});(0,e.registerBlockType)(a.UU,{icon:{src:()=>(0,l.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",enableBackground:"new 0 0 512 512"},(0,l.createElement)("g",null,(0,l.createElement)("g",null,(0,l.createElement)("path",{className:"st0",fill:"#EA60D5",d:"M416.5,36.7h-261c-25.8,0-46.8,21-46.8,46.8v25.3H83.5c-25.8,0-46.8,21-46.8,46.8v261c0,25.8,21,46.8,46.8,46.8\nh261c25.8,0,46.8-21,46.8-46.8v-25.3h25.3c25.8,0,46.8-21,46.8-46.8v-261C463.3,57.7,442.3,36.7,416.5,36.7z M155.5,61.8h261\nc11.9,0,21.7,9.7,21.7,21.7v206.1l-10-11.8l-56-65.4c-5.9-7-14.5-10.7-23.8-10.9c-9.2,0.1-17.8,4.1-23.7,11.2l-65.9,79.1l-21.5-21.4\nc-12.1-12.1-31.9-12.1-44,0l-49,48.9l-10.4,10V83.5C133.9,71.5,143.6,61.8,155.5,61.8z M366.1,416.5c0,11.9-9.7,21.7-21.7,21.7h-261\nc-11.9,0-21.7-9.7-21.7-21.7v-261c0-11.9,9.7-21.7,21.7-21.7h25.3v210.6c0,25.8,21,46.8,46.8,46.8h210.6V416.5z M163,204.3\nc-5.8-25.8,16.9-48.5,42.7-42.7c13,2.9,23.5,13.4,26.4,26.4c5.8,25.8-16.8,48.5-42.7,42.7C176.4,227.9,165.9,217.3,163,204.3z"}))))},edit:({attributes:e,setAttributes:a})=>{const[s,u]=(0,o.useState)([]),[g,b]=(0,o.useState)([]),[f,p]=(0,o.useState)(!0),h=(0,t.useBlockProps)(),w=async e=>{var l;a({folders:e}),await(l=e,d("GET","/get-attachments-from-folders",{folders:l.toString()})).then(e=>{b(e)}).catch(()=>{console.log(!1)}),a({caption:!0})};return(0,o.useEffect)(()=>{w(e.folders),d("GET","/folders").then(e=>{u(e.tree),p(!1)}).catch(e=>{console.log(e)})},[]),(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{...h},(0,l.createElement)("div",{className:"wp-block-catfolders-block-catfolders-gallery catf-wp-block-gallery"},e.folders.length?(0,l.createElement)(i,{attachments:g,layout:e.layout,columns:e.columns,displayCaption:e.caption}):(0,l.createElement)(c,{mess:window.catfData.i18n.global.error_notice_choose_folder})),(0,l.createElement)(t.InspectorControls,null,(0,l.createElement)(n.Panel,null,(0,l.createElement)(n.PanelBody,{title:window.catfData.i18n.global.gallery_setting,initialOpen:!0},f?(0,l.createElement)(r,null):(0,l.createElement)(l.Fragment,null,(0,l.createElement)(m,{folders:s,onChange:w,defaultValue:e.folders}),e.folders.length?(0,l.createElement)(l.Fragment,null,(0,l.createElement)(n.RadioControl,{label:window.catfData.i18n.global.folders_layout_display,name:"layout",selected:e.layout,options:[{label:"Grid",value:"grid"},{label:"Flex",value:"flex"},{label:"Masonry",value:"masonry"}],onChange:e=>a({layout:e})}),(0,l.createElement)(n.RangeControl,{label:window.catfData.i18n.global.folders_columns,value:e.columns,onChange:e=>a({columns:e}),min:1,max:4}),(0,l.createElement)(n.ToggleControl,{label:window.catfData.i18n.global.attachments_caption,checked:e.caption,onChange:e=>{a({caption:e})}}),(0,l.createElement)(n.ToggleControl,{label:window.catfData.i18n.global.enable_lightbox,checked:e.enableLightbox,onChange:e=>{a({enableLightbox:e})}}),!e.enableLightbox&&(0,l.createElement)(n.RadioControl,{label:window.catfData.i18n.global.thumbnail_link,name:"thumbnailLink",selected:e.thumbnailLink,options:[{label:window.catfData.i18n.global.none,value:"none"},{label:window.catfData.i18n.global.attachment,value:"attachment"},{label:window.catfData.i18n.global.media_file,value:"media_file"}],onChange:e=>a({thumbnailLink:e})}),!e.enableLightbox&&"none"!==e.thumbnailLink&&(0,l.createElement)(n.RadioControl,{label:window.catfData.i18n.global.thumbnail_link_target,name:"thumbnailLinkTarget",selected:e.thumbnailLinkTarget,options:[{label:window.catfData.i18n.global.self,value:"_self"},{label:window.catfData.i18n.global.blank,value:"_blank"}],onChange:e=>a({thumbnailLinkTarget:e})})):null))))))},save:()=>null})}},l={};function t(e){var n=l[e];if(void 0!==n)return n.exports;var o=l[e]={exports:{}};return a[e](o,o.exports,t),o.exports}t.m=a,e=[],t.O=(a,l,n,o)=>{if(!l){var r=1/0;for(m=0;m<e.length;m++){for(var[l,n,o]=e[m],c=!0,i=0;i<l.length;i++)(!1&o||r>=o)&&Object.keys(t.O).every(e=>t.O[e](l[i]))?l.splice(i--,1):(c=!1,o<r&&(r=o));if(c){e.splice(m--,1);var s=n();void 0!==s&&(a=s)}}return a}o=o||0;for(var m=e.length;m>0&&e[m-1][2]>o;m--)e[m]=e[m-1];e[m]=[l,n,o]},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={57:0,350:0};t.O.j=a=>0===e[a];var a=(a,l)=>{var n,o,[r,c,i]=l,s=0;if(r.some(a=>0!==e[a])){for(n in c)t.o(c,n)&&(t.m[n]=c[n]);if(i)var m=i(t)}for(a&&a(l);s<r.length;s++)o=r[s],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(m)},l=globalThis.webpackChunkgutenpride=globalThis.webpackChunkgutenpride||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))})();var n=t.O(void 0,[350],()=>t(101));n=t.O(n)})();